<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Authentication/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Authentication/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var passport = require('passport');
var signup = require('./Signup');

/** 
 *  &lt;h3>Description: Contains all the methods and dependencies that allow to complete the signup, signin and signout tasks.&lt;/h3>
    &lt;ul> 
        &lt;li> Passport: Passport is authentication middleware for Node.js.
            &lt;ul>
                &lt;li> init.js: Initialize Strategies and Passport's methods.
            &lt;/ul>
            &lt;br>
        &lt;li> Signin: Contains the Passport Strategies to complete Signin Process in relation with the user's register Mode.
            &lt;ul>
                &lt;li> facebook_strategy.js: Facebook Strategy declaration.
                &lt;li> manual_stralategy.js: Manual Strategy declaration.
                &lt;li> twitter_strategy.js: Twitter Strategy declaration.
                &lt;li> index.js: Signin Strategies exportation.
            &lt;/ul>
            &lt;br>
        &lt;li> Signup: Contains the Passport Strategies in relation with the user's register Mode.
            &lt;ul>
                &lt;li> Manual: Manual Strategy declaration.
                    &lt;ul>
                        &lt;li> email_confirmation.js: Complete the mail confirmation Process.
                        &lt;li> registration.js: Complete de user's registration Process.
                    &lt;/ul>
                &lt;li> facebook_strategy.js: Facebook Strategy declaration.                               
                &lt;li> twitter_strategy.js: Twitter Strategy declaration.
                &lt;li> index.js: SignUp Strategies exportation.
            &lt;/ul> 
            &lt;br>   
        &lt;li>  index.js: Exports the methods that allow the user to signin, signup or signout tasks.       
    &lt;/ul> 
 * @module Authentication
*/


/**
  &lt;p> Methods that start the Register User Process in relation with the UserType and the RegisterMode. &lt;/p>

 * @param {string} UserType - Fan || Artist.
 * @param {string} registerModer - Manual || Facebook || Twitter.
 * @return {method} Method that registers the User.

*/


var registerUser = function(userType, registerMode){
    console.log(signup);
    return signup[registerMode].registerUser(userType);
};

/**
  &lt;p> Methods that start the Log User Process in relation with the UserType and the SigninMode. &lt;/p>

 * @param {string} UserType - Fan || Artist.
 * @param {string} LoginMode - Manual || Facebook || Twitter.
 * @return {method} passport.authenticate - Passport's Method that indicates which strategy to employ.

*/

var logUser = function(userType, loginMode){
    
    if(userType === 'artist') {
        
        return passport.authenticate('artistLogin', 
		    { 
			    successRedirect: '/', 
			    failureRedirect: '/authentication/signin/',
			    failureFlash: true 
		    }
	    );
    }
    else if(userType === 'fan'){
        
        switch(loginMode){
            
            case 'manual':
                return passport.authenticate('fanLogin', 
            		{ 
            			successRedirect: '/', 
            			failureRedirect: '/authentication/signin',
            			failureFlash: true 
            		}
            	);
        }
    }
};

/**
  &lt;p> Methods that terminate a login session. Removes the req.user property. &lt;/p>

 * @param {object} req - HTTP Request.
 * @param {object} res - HTTP Response.

*/


var logout = function(req, res){
    req.logout();
	res.redirect('/');
};

module.exports = {
    registerUser : registerUser,
    logUser: logUser,
    verifyEmail : signup.manual.verifyEmail,
    logout : logout
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Authentication.html">Authentication</a></li><li><a href="module-Mail%2520Sender.html">Mail Sender</a></li><li><a href="module-Models.html">Models</a></li><li><a href="module-Routes.html">Routes</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta3</a> on Thu May 07 2015 22:03:26 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
