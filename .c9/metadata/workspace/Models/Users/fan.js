{"filter":false,"title":"fan.js","tooltip":"/Models/Users/fan.js","ace":{"folds":[],"scrolltop":177,"scrollleft":0,"selection":{"start":{"row":29,"column":8},"end":{"row":29,"column":20},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":154,"mode":"ace/mode/javascript"}},"hash":"63b33634bd77df2cc43a860305ce34351d9ae9f1","undoManager":{"mark":62,"position":62,"stack":[[{"start":{"row":2,"column":0},"end":{"row":3,"column":50},"action":"remove","lines":["var registerFunctions = require('./register-functions');","var loginFunctions = require('./login-functions');"]}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":50},"action":"insert","lines":["var userComponents = require('./user_components');"]}],[{"start":{"row":41,"column":38},"end":{"row":41,"column":39},"action":"remove","lines":["s"]}],[{"start":{"row":41,"column":37},"end":{"row":41,"column":38},"action":"remove","lines":["n"]}],[{"start":{"row":41,"column":36},"end":{"row":41,"column":37},"action":"remove","lines":["o"]}],[{"start":{"row":41,"column":35},"end":{"row":41,"column":36},"action":"remove","lines":["i"]}],[{"start":{"row":41,"column":34},"end":{"row":41,"column":35},"action":"remove","lines":["t"]}],[{"start":{"row":41,"column":33},"end":{"row":41,"column":34},"action":"remove","lines":["c"]}],[{"start":{"row":41,"column":32},"end":{"row":41,"column":33},"action":"remove","lines":["n"]}],[{"start":{"row":41,"column":31},"end":{"row":41,"column":32},"action":"remove","lines":["u"]}],[{"start":{"row":41,"column":30},"end":{"row":41,"column":31},"action":"remove","lines":["F"]}],[{"start":{"row":41,"column":29},"end":{"row":41,"column":30},"action":"remove","lines":["r"]}],[{"start":{"row":41,"column":28},"end":{"row":41,"column":29},"action":"remove","lines":["e"]}],[{"start":{"row":41,"column":27},"end":{"row":41,"column":28},"action":"remove","lines":["t"]}],[{"start":{"row":41,"column":26},"end":{"row":41,"column":27},"action":"remove","lines":["s"]}],[{"start":{"row":41,"column":25},"end":{"row":41,"column":26},"action":"remove","lines":["i"]}],[{"start":{"row":41,"column":24},"end":{"row":41,"column":25},"action":"remove","lines":["g"]}],[{"start":{"row":41,"column":23},"end":{"row":41,"column":24},"action":"remove","lines":["e"]}],[{"start":{"row":41,"column":22},"end":{"row":41,"column":23},"action":"remove","lines":["r"]}],[{"start":{"row":41,"column":22},"end":{"row":41,"column":23},"action":"insert","lines":["u"]}],[{"start":{"row":41,"column":23},"end":{"row":41,"column":24},"action":"insert","lines":["s"]}],[{"start":{"row":41,"column":24},"end":{"row":41,"column":25},"action":"insert","lines":["e"]}],[{"start":{"row":41,"column":22},"end":{"row":41,"column":25},"action":"remove","lines":["use"]},{"start":{"row":41,"column":22},"end":{"row":41,"column":36},"action":"insert","lines":["userComponents"]}],[{"start":{"row":42,"column":36},"end":{"row":42,"column":37},"action":"remove","lines":["s"]}],[{"start":{"row":42,"column":35},"end":{"row":42,"column":36},"action":"remove","lines":["n"]}],[{"start":{"row":42,"column":34},"end":{"row":42,"column":35},"action":"remove","lines":["o"]}],[{"start":{"row":42,"column":33},"end":{"row":42,"column":34},"action":"remove","lines":["i"]}],[{"start":{"row":42,"column":32},"end":{"row":42,"column":33},"action":"remove","lines":["t"]}],[{"start":{"row":42,"column":31},"end":{"row":42,"column":32},"action":"remove","lines":["c"]}],[{"start":{"row":42,"column":30},"end":{"row":42,"column":31},"action":"remove","lines":["n"]}],[{"start":{"row":42,"column":29},"end":{"row":42,"column":30},"action":"remove","lines":["u"]}],[{"start":{"row":42,"column":28},"end":{"row":42,"column":29},"action":"remove","lines":["F"]}],[{"start":{"row":42,"column":27},"end":{"row":42,"column":28},"action":"remove","lines":["r"]}],[{"start":{"row":42,"column":26},"end":{"row":42,"column":27},"action":"remove","lines":["e"]}],[{"start":{"row":42,"column":25},"end":{"row":42,"column":26},"action":"remove","lines":["t"]}],[{"start":{"row":42,"column":24},"end":{"row":42,"column":25},"action":"remove","lines":["s"]}],[{"start":{"row":42,"column":23},"end":{"row":42,"column":24},"action":"remove","lines":["i"]}],[{"start":{"row":42,"column":22},"end":{"row":42,"column":23},"action":"remove","lines":["g"]}],[{"start":{"row":42,"column":21},"end":{"row":42,"column":22},"action":"remove","lines":["e"]}],[{"start":{"row":42,"column":20},"end":{"row":42,"column":21},"action":"remove","lines":["r"]}],[{"start":{"row":42,"column":20},"end":{"row":42,"column":21},"action":"insert","lines":["u"]}],[{"start":{"row":42,"column":21},"end":{"row":42,"column":22},"action":"insert","lines":["s"]}],[{"start":{"row":42,"column":22},"end":{"row":42,"column":23},"action":"insert","lines":["e"]}],[{"start":{"row":42,"column":20},"end":{"row":42,"column":23},"action":"remove","lines":["use"]},{"start":{"row":42,"column":20},"end":{"row":42,"column":34},"action":"insert","lines":["userComponents"]}],[{"start":{"row":43,"column":33},"end":{"row":43,"column":34},"action":"remove","lines":["s"]}],[{"start":{"row":43,"column":32},"end":{"row":43,"column":33},"action":"remove","lines":["n"]}],[{"start":{"row":43,"column":31},"end":{"row":43,"column":32},"action":"remove","lines":["o"]}],[{"start":{"row":43,"column":30},"end":{"row":43,"column":31},"action":"remove","lines":["i"]}],[{"start":{"row":43,"column":29},"end":{"row":43,"column":30},"action":"remove","lines":["t"]}],[{"start":{"row":43,"column":28},"end":{"row":43,"column":29},"action":"remove","lines":["c"]}],[{"start":{"row":43,"column":27},"end":{"row":43,"column":28},"action":"remove","lines":["n"]}],[{"start":{"row":43,"column":26},"end":{"row":43,"column":27},"action":"remove","lines":["u"]}],[{"start":{"row":43,"column":25},"end":{"row":43,"column":26},"action":"remove","lines":["F"]}],[{"start":{"row":43,"column":24},"end":{"row":43,"column":25},"action":"remove","lines":["n"]}],[{"start":{"row":43,"column":23},"end":{"row":43,"column":24},"action":"remove","lines":["i"]}],[{"start":{"row":43,"column":22},"end":{"row":43,"column":23},"action":"remove","lines":["g"]}],[{"start":{"row":43,"column":21},"end":{"row":43,"column":22},"action":"remove","lines":["o"]}],[{"start":{"row":43,"column":20},"end":{"row":43,"column":21},"action":"remove","lines":["l"]}],[{"start":{"row":43,"column":20},"end":{"row":43,"column":21},"action":"insert","lines":["u"]}],[{"start":{"row":43,"column":21},"end":{"row":43,"column":22},"action":"insert","lines":["s"]}],[{"start":{"row":43,"column":20},"end":{"row":43,"column":22},"action":"remove","lines":["us"]},{"start":{"row":43,"column":20},"end":{"row":43,"column":34},"action":"insert","lines":["userComponents"]}],[{"start":{"row":0,"column":24},"end":{"row":0,"column":25},"action":"insert","lines":["."]}],[{"start":{"row":0,"column":0},"end":{"row":48,"column":21},"action":"remove","lines":["var mongoose = require('../mongoose');","var Schema = mongoose.Schema;","var userComponents = require('./user_components');","","var historyItem = new Schema({","    ","    contentId : Schema.Types.ObjectId,","    ViewDAte    : Date","    ","});","","var fanSchema = new Schema({","","        fanId: Schema.Types.ObjectId,","        info:{","         ","            name: String,","            password: String,","            salt: String,","            email: String,","            birthday: Date,","            gender: String,","            avatarPath: String,","            location: String","            ","        },","        token: String,","        mailConfirmation: { type: Boolean, default: false },","        registerMethod: String,","        preferences:[Schema.Types.ObjectId], ","        history:[historyItem], // Json Array {contenido_id,fecha_reproduccion:\"Date\"}","        favouriteArtists:[Schema.Types.ObjectId],","        likes:[Schema.Types.ObjectId],","        followedArtist:[Schema.Types.ObjectId],","        artistShared:[Schema.Types.ObjectId],","        contentShared:[Schema.Types.ObjectId],","        registerDate: Date  // Fecha de Registro a New Artists","        //preferencesAlgorithm:\"\",","        ","});","","fanSchema.pre('save', userComponents.saveMiddlewares.hashPassword);","fanSchema.statics = userComponents.statics;","fanSchema.methods = userComponents.methods;","","","var Fan = mongoose.model('Fan', fanSchema); ","","module.exports = Fan;"],"id":2},{"start":{"row":0,"column":0},"end":{"row":49,"column":21},"action":"insert","lines":["var mongoose = require('../mongoose');","var Schema = mongoose.Schema;","var userComponents = require('./user_components');","","var historyItem = new Schema({","    ","    contentId : Schema.Types.ObjectId,","    ViewDAte    : Date","    ","});","","var fanSchema = new Schema({","","        fanId: Schema.Types.ObjectId,","        info:{","         ","            name: String,","            password: String,","            salt: String,","            email: String,","            birthday: Date,","            gender: String,","            avatarPath: String,","            location: String","            ","        },","        token: String,","        mailConfirmation: { type: Boolean, default: false },","        registerMethod: String,","        registerMode: String,","        preferences:[Schema.Types.ObjectId], ","        history:[historyItem], // Json Array {contenido_id,fecha_reproduccion:\"Date\"}","        favouriteArtists:[Schema.Types.ObjectId],","        likes:[Schema.Types.ObjectId],","        followedArtist:[Schema.Types.ObjectId],","        artistShared:[Schema.Types.ObjectId],","        contentShared:[Schema.Types.ObjectId],","        registerDate: Date  // Fecha de Registro a New Artists","        //preferencesAlgorithm:\"\",","        ","});","","fanSchema.pre('save', userComponents.saveMiddlewares.hashPassword);","fanSchema.statics = userComponents.statics;","fanSchema.methods = userComponents.methods;","","","var Fan = mongoose.model('Fan', fanSchema); ","","module.exports = Fan;"]}]]},"timestamp":1431108447000}