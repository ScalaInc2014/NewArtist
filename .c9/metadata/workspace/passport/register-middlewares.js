{"filter":false,"title":"register-middlewares.js","tooltip":"/passport/register-middlewares.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":156,"column":31},"end":{"row":156,"column":32},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":28},"end":{"row":156,"column":32},"action":"remove","lines":["mail"]},{"start":{"row":156,"column":28},"end":{"row":156,"column":44},"action":"insert","lines":["mailConfirmation"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":0},"end":{"row":159,"column":23},"action":"remove","lines":["                document.info.password = hash;","                next();"]},{"start":{"row":158,"column":0},"end":{"row":166,"column":29},"action":"insert","lines":["                            if(mailConfirmation){","                                ","                                 req.login(user, function(err) {","                                    ","                                    if (err) console.log(err);","                                    res.redirect(mailVerificatedRedirect);","                                });                    ","                                ","                            }"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":0},"end":{"row":158,"column":4},"action":"remove","lines":["    "]},{"start":{"row":159,"column":0},"end":{"row":159,"column":4},"action":"remove","lines":["    "]},{"start":{"row":160,"column":0},"end":{"row":160,"column":4},"action":"remove","lines":["    "]},{"start":{"row":161,"column":0},"end":{"row":161,"column":4},"action":"remove","lines":["    "]},{"start":{"row":162,"column":0},"end":{"row":162,"column":4},"action":"remove","lines":["    "]},{"start":{"row":163,"column":0},"end":{"row":163,"column":4},"action":"remove","lines":["    "]},{"start":{"row":164,"column":0},"end":{"row":164,"column":4},"action":"remove","lines":["    "]},{"start":{"row":165,"column":0},"end":{"row":165,"column":4},"action":"remove","lines":["    "]},{"start":{"row":166,"column":0},"end":{"row":166,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":0},"end":{"row":158,"column":4},"action":"remove","lines":["    "]},{"start":{"row":159,"column":0},"end":{"row":159,"column":4},"action":"remove","lines":["    "]},{"start":{"row":160,"column":0},"end":{"row":160,"column":4},"action":"remove","lines":["    "]},{"start":{"row":161,"column":0},"end":{"row":161,"column":4},"action":"remove","lines":["    "]},{"start":{"row":162,"column":0},"end":{"row":162,"column":4},"action":"remove","lines":["    "]},{"start":{"row":163,"column":0},"end":{"row":163,"column":4},"action":"remove","lines":["    "]},{"start":{"row":164,"column":0},"end":{"row":164,"column":4},"action":"remove","lines":["    "]},{"start":{"row":165,"column":0},"end":{"row":165,"column":4},"action":"remove","lines":["    "]},{"start":{"row":166,"column":0},"end":{"row":166,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":0},"end":{"row":158,"column":4},"action":"remove","lines":["    "]},{"start":{"row":159,"column":0},"end":{"row":159,"column":4},"action":"remove","lines":["    "]},{"start":{"row":160,"column":0},"end":{"row":160,"column":4},"action":"remove","lines":["    "]},{"start":{"row":161,"column":0},"end":{"row":161,"column":4},"action":"remove","lines":["    "]},{"start":{"row":162,"column":0},"end":{"row":162,"column":4},"action":"remove","lines":["    "]},{"start":{"row":163,"column":0},"end":{"row":163,"column":4},"action":"remove","lines":["    "]},{"start":{"row":164,"column":0},"end":{"row":164,"column":4},"action":"remove","lines":["    "]},{"start":{"row":165,"column":0},"end":{"row":165,"column":4},"action":"remove","lines":["    "]},{"start":{"row":166,"column":0},"end":{"row":166,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":134,"column":0},"end":{"row":145,"column":28},"action":"remove","lines":["                        .then(function(mailConfirmation){","                            ","","                            ","                            ","                        })","                    ","                        .then(null, function(err){","    ","                             console.log(err);","                             ","                        }); "]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":20},"end":{"row":134,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":130,"column":69},"end":{"row":131,"column":20},"action":"remove","lines":["","                    "]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":34},"end":{"row":147,"column":35},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":33},"end":{"row":147,"column":34},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":32},"end":{"row":147,"column":33},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":31},"end":{"row":147,"column":32},"action":"remove","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":31},"end":{"row":147,"column":32},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":32},"end":{"row":147,"column":33},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":33},"end":{"row":147,"column":34},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":32},"end":{"row":147,"column":34},"action":"remove","lines":["us"]},{"start":{"row":147,"column":32},"end":{"row":147,"column":38},"action":"insert","lines":["userId"]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":62},"end":{"row":129,"column":63},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":61},"end":{"row":129,"column":62},"action":"remove","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":61},"end":{"row":129,"column":62},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":61},"end":{"row":129,"column":62},"action":"remove","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":61},"end":{"row":129,"column":62},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":62},"end":{"row":129,"column":63},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":63},"end":{"row":129,"column":64},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":64},"end":{"row":129,"column":65},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":143,"column":28},"end":{"row":143,"column":44},"action":"remove","lines":["mailConfirmation"]}]}],[{"group":"doc","deltas":[{"start":{"row":143,"column":28},"end":{"row":143,"column":29},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":143,"column":29},"end":{"row":143,"column":30},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":143,"column":30},"end":{"row":143,"column":31},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":143,"column":31},"end":{"row":143,"column":32},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":37},"end":{"row":147,"column":38},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":36},"end":{"row":147,"column":37},"action":"remove","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":35},"end":{"row":147,"column":36},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":35},"end":{"row":147,"column":36},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":20},"end":{"row":145,"column":35},"action":"remove","lines":["ailConfirmation"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":19},"end":{"row":145,"column":20},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":19},"end":{"row":145,"column":20},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":20},"end":{"row":145,"column":21},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":21},"end":{"row":145,"column":22},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":22},"end":{"row":145,"column":23},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":131,"column":56},"end":{"row":131,"column":57},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":170,"column":2},"action":"remove","lines":["var Fan = require('../models/fan');","var Artist = require('../models/artist');","var mongoose = require('mongoose');","var mailSender = require('../mail_sender');","var mailTypes = mailSender.mailTypes;","","var getUserConfiguration = function(req, userType) {","    ","    var user = {};","    var currentDate = new Date();","    var Id = mongoose.Types.ObjectId();","    ","    if(userType === 'fan') {","        ","        user.dataStructure = {","            fanId: Id,","            info:{","                name: req.body.name,","                password: req.body.password,","                email: req.body.email,","                birthday: req.body.birthday,","                gender: req.body.gender,","                avatarPath: 'http://www.nocturnar.com/forum/attachments/fondos-de-pantalla/28575d1338158805-paisajes-hermosos-fondo-de-pantalla-paisajes_hermosos_del_mundo2.jpg',","                location: req.body.location","            },","            registerDate: currentDate,","            token: Id,","        };","        ","        user.model = Fan;","      ","    }","    else {","        user.dataStructure = {","            artistId: Id,","            info:{","             ","                name: req.body.name,","                password: req.body.password,","                email: req.body.email,","                avatarPath: 'http://www.nocturnar.com/forum/attachments/fondos-de-pantalla/28575d1338158805-paisajes-hermosos-fondo-de-pantalla-paisajes_hermosos_del_mundo2.jpg',","                location: req.body.location","                ","            },","            artType: req.body.artType,","            registerDate: currentDate,","            token: Id,","            ","        };","        ","        user.model = Artist;","     ","    }","    ","    return user;","};","","var registerUser = function(userType) {","    ","    return function(req, res){","","        var user = getUserConfiguration(req, userType);","        var registerFailRedirect = '/authentication/signup/'+ userType;","        var mailVerificationRedirect = '/authentication/signup/mail_verification';","        var locals = {}; //variables for template","        ","        user.model.registerPromise(user.dataStructure)","        ","            .then(function(newUserInfo){"," ","                if(newUserInfo) {","                    ","                    locals.confirmationLink = 'http://localhost:8080/authentication/signup/confirmation/'+userType+'/'+ newUserInfo.token;","                    locals.userType = userType;","                    mailSender(newUserInfo.email, locals, mailTypes.CONFIRMATION_MAIL)","                     ","                        .then(function (info) {","                            ","                            console.log(\"ONFULLFILLLED \");","                            res.redirect(mailVerificationRedirect);","                            //console.log(info);","                            ","                        })","                        ","                        .then(null,function(err){","                            ","                            console.log(\"ON REJECTED \");","                            console.log(err);","                        });","                }","                else {","                    console.log(\"User already exists\");","                    req.flash('error', 'User Already Exists!!!');","                    res.redirect(registerFailRedirect);","                }                ","                ","            })","            ","            .then(null,function(err){","                ","                console.log(\"Operational Error\");","                console.log(err);","                ","            });","    };","};","","","var mailConfirmation = function (userType){","    ","    var userModel;","    ","    if(userType === 'fan')","        userModel = Fan;","    else if(userType === 'artist')","        userModel = Artist;","","    return function(req, res){","        ","        var userId = req.params.user_id;","        var query = userModel.findOne({ 'token': userId});","        var verifyTokenPromise = query.exec();","        var mailVerificatedRedirect = '/';","        verifyTokenPromise","","            .then(function(user){","    ","                if(user){","                    ","                    query = userModel.findByIdAndUpdate( user._id, { $set: {  mailConfirmation: true }});","                    var updateMailConfirmationPromise = query.exec();","                    return updateMailConfirmationPromise;","                    ","                }","","                else{","","                    console.log(\"TOken Incorrecto\");","","                }","    ","            })","            ","            .then (function(user){","","                if(user){","                    ","                     req.login( user, function(err) {","                        ","                        if (err) console.log(err);","                        res.redirect(mailVerificatedRedirect);","                    });                    ","                    ","                }","            })            ","    ","            .then(null, function(err){","    ","                 console.log(err);","            }); ","","    };","","};","","module.exports = {",""," registerUser: registerUser,"," mailConfirmation : mailConfirmation","","};"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":181,"column":2},"action":"insert","lines":["var Fan = require('../models/fan');","var Artist = require('../models/artist');","var mongoose = require('mongoose');","var mailSender = require('../mail_sender');","var mailTypes = mailSender.mailTypes;","","var getUserConfiguration = function(req, userType) {","    ","    var user = {};","    var currentDate = new Date();","    var Id = mongoose.Types.ObjectId();","    ","    if(userType === 'fan') {","        ","        user.dataStructure = {","            fanId: Id,","            info:{","                name: req.body.name,","                password: req.body.password,","                email: req.body.email,","                birthday: req.body.birthday,","                gender: req.body.gender,","                avatarPath: 'http://www.nocturnar.com/forum/attachments/fondos-de-pantalla/28575d1338158805-paisajes-hermosos-fondo-de-pantalla-paisajes_hermosos_del_mundo2.jpg',","                location: req.body.location","            },","            registerDate: currentDate,","            token: Id,","        };","        ","        user.model = Fan;","      ","    }","    else {","        user.dataStructure = {","            artistId: Id,","            info:{","             ","                name: req.body.name,","                password: req.body.password,","                email: req.body.email,","                avatarPath: 'http://www.nocturnar.com/forum/attachments/fondos-de-pantalla/28575d1338158805-paisajes-hermosos-fondo-de-pantalla-paisajes_hermosos_del_mundo2.jpg',","                location: req.body.location","                ","            },","            artType: req.body.artType,","            registerDate: currentDate,","            token: Id,","            ","        };","        ","        user.model = Artist;","     ","    }","    ","    return user;","};","","var registerUser = function(userType) {","    ","    return function(req, res){","","        var user = getUserConfiguration(req, userType);","        var registerFailRedirect = '/authentication/signup/'+ userType;","        var mailVerificationRedirect = '/authentication/signup/mail_verification';","        var locals = {}; //variables for template","        ","        user.model.registerPromise(user.dataStructure)","        ","            .then(function(newUserInfo){"," ","                if(newUserInfo) {","                    ","                    locals.confirmationLink = 'http://localhost:8080/authentication/signup/confirmation/'+userType+'/'+ newUserInfo.token;","                    locals.userType = userType;","                    mailSender(newUserInfo.email, locals, mailTypes.CONFIRMATION_MAIL)","                     ","                        .then(function (info) {","","                            res.redirect(mailVerificationRedirect);","","                        })","                        ","                        .then(null,function(err){","                            ","                            console.log(\"ON REJECTED \");","                            console.log(err);","                        });","                }","                else {","                    ","                    console.log(\"User already exists\");","                    req.flash('error', 'User Already Exists!!!');","                    res.redirect(registerFailRedirect);","                }                ","                ","            })","            ","            .then(null,function(err){","                ","                console.log(\"Operational Error\");","                console.log(err);","                ","            });","    };","};","","","var mailConfirmation = function (userType){","    ","    var userModel;","    ","    if(userType === 'fan')","        userModel = Fan;","    else if(userType === 'artist')","        userModel = Artist;","","    return function(req, res){","        ","        var userId = req.params.user_id;","        var query = userModel.findOne({ 'token': userId});","        var verifyTokenPromise = query.exec();","        var mailVerificatedRedirect = '/';","        var errorVerificationRedirect = '/authentication/signup/verificationError';","        verifyTokenPromise","","            .then(function(user){","    ","                if(user){","                    ","                   if(!user.mailConfirmation){","","                        query = userModel.findByIdAndUpdate( user._id, { $set: {  mailConfirmation: true }});","                        var updateMailConfirmationPromise = query.exec();","                        return updateMailConfirmationPromise","                   } ","                   else{","","                        req.flash('error', 'Link de Verificación ha Expirado');","                        res.redirect(errorVerificationRedirect);","                   }","","                }","","                else{","","                    req.flash('error', 'Link de Verificación Inválido');","                    res.redirect(errorVerificationRedirect);","                    console.log(\"Token Incorrecto\");","                }","","            })","            ","            .then (function(mailConfirmation){","","                if(mailConfirmation){","                    ","                     console.log(\"req.login\");","                     req.login( userId, function(err) {","                        ","                        if (err) console.log(err);","                        res.redirect(mailVerificatedRedirect);","                    });                    ","                    ","                }","            })            ","    ","            .then(null, function(err){","    ","                 console.log(\"Manejo de Error mailConfirmation \");","                 console.log(err);","            }); ","","    };","","};","","module.exports = {",""," registerUser: registerUser,"," mailConfirmation : mailConfirmation","","};"]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":0},"end":{"row":147,"column":52},"action":"remove","lines":["                    console.log(\"Token Incorrecto\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":0},"end":{"row":156,"column":46},"action":"remove","lines":["                     console.log(\"req.login\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":155,"column":20},"end":{"row":156,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":0},"end":{"row":167,"column":66},"action":"remove","lines":["    ","                 console.log(\"Manejo de Error mailConfirmation \");"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":43},"end":{"row":152,"column":44},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":42},"end":{"row":152,"column":43},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":41},"end":{"row":152,"column":42},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":40},"end":{"row":152,"column":41},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":39},"end":{"row":152,"column":40},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":38},"end":{"row":152,"column":39},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":37},"end":{"row":152,"column":38},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":36},"end":{"row":152,"column":37},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":35},"end":{"row":152,"column":36},"action":"remove","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":34},"end":{"row":152,"column":35},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":33},"end":{"row":152,"column":34},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":32},"end":{"row":152,"column":33},"action":"remove","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":31},"end":{"row":152,"column":32},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":30},"end":{"row":152,"column":31},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":29},"end":{"row":152,"column":30},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":28},"end":{"row":152,"column":29},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":28},"end":{"row":152,"column":29},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":29},"end":{"row":152,"column":30},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":30},"end":{"row":152,"column":31},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":31},"end":{"row":152,"column":32},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":34},"end":{"row":154,"column":35},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":33},"end":{"row":154,"column":34},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":32},"end":{"row":154,"column":33},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":31},"end":{"row":154,"column":32},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":30},"end":{"row":154,"column":31},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":29},"end":{"row":154,"column":30},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":28},"end":{"row":154,"column":29},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":27},"end":{"row":154,"column":28},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":26},"end":{"row":154,"column":27},"action":"remove","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":25},"end":{"row":154,"column":26},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":24},"end":{"row":154,"column":25},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":23},"end":{"row":154,"column":24},"action":"remove","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":22},"end":{"row":154,"column":23},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":21},"end":{"row":154,"column":22},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":20},"end":{"row":154,"column":21},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":19},"end":{"row":154,"column":20},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":19},"end":{"row":154,"column":20},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":20},"end":{"row":154,"column":21},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":21},"end":{"row":154,"column":22},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":22},"end":{"row":154,"column":23},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":19},"end":{"row":154,"column":23},"action":"remove","lines":["user"]},{"start":{"row":154,"column":19},"end":{"row":154,"column":23},"action":"insert","lines":["user"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":37},"end":{"row":156,"column":38},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":36},"end":{"row":156,"column":37},"action":"remove","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":33},"end":{"row":158,"column":37},"action":"insert","lines":["retu"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":37},"end":{"row":158,"column":39},"action":"insert","lines":["rn"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":39},"end":{"row":158,"column":40},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":16},"end":{"row":167,"column":17},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":17},"end":{"row":167,"column":18},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":18},"end":{"row":167,"column":19},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":19},"end":{"row":167,"column":20},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":20},"end":{"row":167,"column":21},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":20},"end":{"row":167,"column":21},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":16},"end":{"row":167,"column":20},"action":"remove","lines":["retu"]},{"start":{"row":167,"column":16},"end":{"row":167,"column":22},"action":"insert","lines":["return"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":60},"end":{"row":133,"column":61},"action":"insert","lines":[";"]}]}]]},"ace":{"folds":[],"scrolltop":990,"scrollleft":0,"selection":{"start":{"row":164,"column":4},"end":{"row":164,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1428699598000,"hash":"055bc10d153e5150ca05f3e1cc3fbcee8f5ed6ba"}